üì¶ –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
==========================================

–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–∑ —Ç—Ä—ë—Ö –ø–∞–∫–µ—Ç–æ–≤:

*   `api` ‚Äî NestJS HTTP API –¥–ª—è –ø—Ä–∏—ë–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤,
*   `booking` ‚Äî NestJS Kafka consumer –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π,
*   `shared` ‚Äî –æ–±—â–∏–µ DTO, –º–æ–¥–µ–ª–∏ Sequelize –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î.

Kafka –∏ Zookeeper –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî SQLite (–µ–¥–∏–Ω–∞—è –¥–ª—è –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤).

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
-----------------

    /events_booking
    ‚îú‚îÄ api/               # NestJS API
    ‚îÇ  ‚îú‚îÄ src/
    ‚îÇ  ‚îú‚îÄ .env (—Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
    ‚îÇ  ‚îî‚îÄ package.json
    ‚îú‚îÄ booking/           # NestJS Kafka consumer
    ‚îÇ  ‚îú‚îÄ src/
    ‚îÇ  ‚îî‚îÄ package.json
    ‚îú‚îÄ shared/            # –æ–±—â–∏–µ DTO, –º–æ–¥–µ–ª–∏
    ‚îÇ  ‚îú‚îÄ src/
    ‚îÇ  ‚îî‚îÄ package.json
    ‚îú‚îÄ docker-compose.yaml
    ‚îî‚îÄ package.json       # –∫–æ—Ä–Ω–µ–≤–æ–π (workspaces + scripts)
    

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
-------------------

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `api/.env` –∏ —É–∫–∞–∂–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–π –ø–æ—Ä—Ç:

**api/.env**

    PORT=3000
    

–≠—Ç–æ—Ç –ø–æ—Ä—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è HTTP-—Å–µ—Ä–≤–∏—Å–æ–º `api`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `3000`.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
----------------------

    # –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
    npm install
    

–ó–∞–ø—É—Å–∫ Kafka –∏ Zookeeper
------------------------

    docker-compose up -d --build
    

–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
---------------

–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

    npm start
    

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API
-------------

POST

/events

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

    POST http://localhost:{PORT}/events
    Content-Type: application/json
    
    {
      "name": "–î–∂–∞–∑ –≤ —Å–∞–¥—É",
      "total_seats": 50
    }

GET

/events

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.

POST

/bookings

–°–æ–∑–¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏.

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:

*   —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Å–æ–±—ã—Ç–∏–µ,
*   –µ—Å—Ç—å –ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞,
*   –Ω–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ —Ä–∞–Ω–µ–µ.

–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:

*   `201 Created` ‚Äî –±—Ä–æ–Ω—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞,
*   `404 Not Found` ‚Äî —Å–æ–±—ã—Ç–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ,
*   `409 Conflict` ‚Äî –±—Ä–æ–Ω—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

    POST http://localhost:{PORT}/bookings
    Content-Type: application/json
    
    {
      "event_id": 1,
      "user_id": "user123"
    }

GET

/bookings

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π.

\`\`\`